/* Lightweight client-side i18n for static pages
   - Provides translations for en, hi, te, kn, ta
   - Scans the document for data-i18n attributes and data-i18n-placeholder/value
   - Persists selected language in localStorage under 'lang'
   - Attaches a small language chooser to an element with id 'language-btn' or class 'language-selector'
*/
(function(window){
    const STORAGE_KEY = 'lang';
    const DEFAULT = 'en';

    const TRANSLATIONS = {
        en: {
            tile_recommend: 'ЁЯТб Crop Recommendation',
            tile_forecast: 'ЁЯУИ Price Forecast',
            tile_info: 'ЁЯМ╛ Crop Info',
            tile_calendar: 'ЁЯУЕ Calendar',
            tile_profile: 'ЁЯСд Profile',
            page_title: 'ЁЯУК Crop Information',
            select_crop: 'Select a Crop for Price Analysis',
            loading: 'Loading crop information...',
            back_to_home: 'тЖР Back to Home',
            quick_actions: 'Quick Actions'
        ,
            feature_info: 'Crop Information',
            feature_info_desc: 'Browse crop-specific details, market prices, and quick tools like recommendations and forecasts.',
            btn_view_info: 'View Crop Info',
            feature_recommend: 'Crop Recommendation',
            feature_recommend_desc: 'Receive intelligent crop recommendations based on your soil type, location, and seasonal conditions.',
            btn_explore_recommend: 'Explore Feature',
            feature_forecast: 'Price Forecast',
            feature_forecast_desc: 'View price predictions, market trends, and get profitability advice for your crops over the next 6 months.',
            btn_explore_forecast: 'Explore Feature'
        ,
            cost_of_cultivation: 'Cost of Cultivation:',
            expected_yield: 'Expected Yield:',
            estimated_profit: 'Estimated Profit:',
            current_market_price: 'Current Market Price:',
            government_msp: 'Government MSP:',
            recommendation_note: 'Note: The recommendation model was trained on N, P, K and pH values. Other fields are optional.'
        },
        hi: {
            tile_recommend: 'ЁЯТб рдлрд╕рд▓ рд╕рд┐рдлрд╛рд░рд┐рд╢',
            tile_forecast: 'ЁЯУИ рдореВрд▓реНрдп рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди',
            tile_info: 'ЁЯМ╛ рдлрд╝рд╕рд▓ рдЬрд╛рдирдХрд╛рд░реА',
            tile_calendar: 'ЁЯУЕ рдХреИрд▓реЗрдВрдбрд░',
            tile_profile: 'ЁЯСд рдкреНрд░реЛрдлрд╝рд╛рдЗрд▓',
            page_title: 'ЁЯУК рдлрд╕рд▓ рдЬрд╛рдирдХрд╛рд░реА',
            select_crop: 'рдореВрд▓реНрдп рд╡рд┐рд╢реНрд▓реЗрд╖рдг рдХреЗ рд▓рд┐рдП рдлрд╕рд▓ рдЪреБрдиреЗрдВ',
            loading: 'рдлрд╕рд▓ рдХреА рдЬрд╛рдирдХрд╛рд░реА рд▓реЛрдб рд╣реЛ рд░рд╣реА рд╣реИ...',
            back_to_home: 'тЖР рд╣реЛрдо рдкрд░ рд╡рд╛рдкрд╕',
            quick_actions: 'рддреНрд╡рд░рд┐рдд рдХреНрд░рд┐рдпрд╛рдПрдБ'
        ,
            feature_info: 'рдлрд╝рд╕рд▓ рдЬрд╛рдирдХрд╛рд░реА',
            feature_info_desc: 'рдлрд╕рд▓-рд╡рд┐рд╢рд┐рд╖реНрдЯ рдЬрд╛рдирдХрд╛рд░реА, рдмрд╛рдЬрд╛рд░ рдореВрд▓реНрдп рдФрд░ рддреНрд╡рд░рд┐рдд рдЙрдкрдХрд░рдг рдЬреИрд╕реЗ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рдФрд░ рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди рдмреНрд░рд╛рдЙрдЬрд╝ рдХрд░реЗрдВред',
            btn_view_info: 'рдлрд╝рд╕рд▓ рджреЗрдЦреЗрдВ',
            feature_recommend: 'рдлрд╕рд▓ рд╕рд┐рдлрд╛рд░рд┐рд╢',
            feature_recommend_desc: 'рдЖрдкрдХреА рдорд┐рдЯреНрдЯреА, рд╕реНрдерд╛рди рдФрд░ рдореМрд╕рдореА рдкрд░рд┐рд╕реНрдерд┐рддрд┐рдпреЛрдВ рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рдмреБрджреНрдзрд┐рдорд╛рди рдлрд╕рд▓ рд╕рд┐рдлрд╛рд░рд┐рд╢реЗрдВ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред',
            btn_explore_recommend: 'рдлреАрдЪрд░ рдПрдХреНрд╕рдкреНрд▓реЛрд░ рдХрд░реЗрдВ',
            feature_forecast: 'рдореВрд▓реНрдп рдкреВрд░реНрд╡рд╛рдиреБрдорд╛рди',
            feature_forecast_desc: 'рдореВрд▓реНрдп рднрд╡рд┐рд╖реНрдпрд╡рд╛рдгрд┐рдпрд╛рдБ рджреЗрдЦреЗрдВ, рдмрд╛рдЬрд╛рд░ рд░реБрдЭрд╛рди рдФрд░ рдЕрдЧрд▓рд╛ 6 рдорд╣реАрдиреЗ рдХреЗ рд▓рд┐рдП рд▓рд╛рднрджрд╛рдпрдХ рд╕рд▓рд╛рд╣ рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВред',
            btn_explore_forecast: 'рдлреАрдЪрд░ рдПрдХреНрд╕рдкреНрд▓реЛрд░ рдХрд░реЗрдВ'
        ,
            cost_of_cultivation: 'рдЦреЗрддреА рд▓рд╛рдЧрдд:',
            expected_yield: 'рдЕрдкреЗрдХреНрд╖рд┐рдд рдЙрдкрдЬ:',
            estimated_profit: 'рдЕрдиреБрдорд╛рдирд┐рдд рд▓рд╛рдн:',
            current_market_price: 'рд╡рд░реНрддрдорд╛рди рдмрд╛рдЬрд╛рд░ рдореВрд▓реНрдп:',
            government_msp: 'рд╕рд░рдХрд╛рд░реА MSP:',
            recommendation_note: 'рдиреЛрдЯ: рд╕рд┐рдлрд╛рд░рд┐рд╢ рдореЙрдбрд▓ N, P, K рдФрд░ pH рдкрд░ рдкреНрд░рд╢рд┐рдХреНрд╖рд┐рдд рд╣реИред рдЕрдиреНрдп рдлрд╝реАрд▓реНрдб рд╡реИрдХрд▓реНрдкрд┐рдХ рд╣реИрдВред'
        },
        te: {
            tile_recommend: 'ЁЯТб р░кр░Вр░Я р░╕р░┐р░лр░╛р░░р▒Нр░╕р▒Б',
            tile_forecast: 'ЁЯУИ р░зр░░ р░Ер░Вр░Ър░ир░╛',
            tile_info: 'ЁЯМ╛ р░кр░Вр░Я р░╕р░ор░╛р░Ър░╛р░░р░В',
            tile_calendar: 'ЁЯУЕ р░Хр▒Нр░пр░╛р░▓р▒Жр░Вр░бр░░р▒Н',
            tile_profile: 'ЁЯСд р░кр▒Нр░░р▒Кр░лр▒Ир░▓р▒Н',
            page_title: 'ЁЯУК р░кр░Вр░Я р░╕р░ор░╛р░Ър░╛р░░р░В',
            select_crop: 'р░зр░░ р░╡р░┐р░╢р▒Нр░▓р▒Зр░╖р░г р░Хр▒Лр░╕р░В р░кр░Вр░Яр░ир▒Б р░Ор░Вр░Ър▒Бр░Хр▒Лр░Вр░бр░┐',
            loading: 'р░кр░Вр░Я р░╕р░ор░╛р░Ър░╛р░░р░В р░▓р▒Лр░бр▒Н р░Ер░╡р▒Бр░др▒Лр░Вр░жр░┐...',
            back_to_home: 'тЖР р░╣р▒Лр░ор▒НтАМр░Хр▒Б р░др░┐р░░р░┐р░Чр░┐'
        ,
            feature_info: 'р░кр░Вр░Я р░╕р░ор░╛р░Ър░╛р░░р░В',
            feature_info_desc: 'р░кр░Вр░Я-р░╕р░Вр░мр░Вр░зр░┐р░д р░╡р░┐р░╡р░░р░╛р░▓р▒Б, р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░р░▓р▒Б р░ор░░р░┐р░пр▒Б р░╕р░┐р░лр░╛р░░р▒Нр░╕р▒Бр░▓р▒Б р░ор░░р░┐р░пр▒Б р░Ер░Вр░Ър░ир░╛р░▓ р░╡р░Вр░Яр░┐ р░╕р░╛р░зр░ир░╛р░▓р▒Б р░мр▒Нр░░р▒Мр░Ьр▒Н р░Ър▒Зр░пр░Вр░бр░┐.',
            btn_view_info: 'р░кр░Вр░Я р░Ър▒Вр░бр░Вр░бр░┐',
            feature_recommend: 'р░кр░Вр░Я р░╕р░┐р░лр░╛р░░р▒Нр░╕р▒Б',
            feature_recommend_desc: 'р░ор▒А р░ор░Яр▒Нр░Яр░┐ р░░р░Хр░В, р░╕р▒Нр░ер░╛р░ир░В р░ор░░р░┐р░пр▒Б р░Хр░╛р░▓р░кр░░р░┐р░ор░╛р░г р░кр░░р░┐р░╕р▒Нр░ер░┐р░др▒Бр░▓ р░Жр░зр░╛р░░р░Вр░Чр░╛ р░др▒Жр░▓р░┐р░╡р▒Ир░и р░кр░Вр░Я р░╕р▒Вр░Ър░ир░▓р▒Б р░кр▒Кр░Вр░жр░Вр░бр░┐.',
            btn_explore_recommend: 'р░лр▒Ар░Ър░░р▒Н рдПрдХреНрд╕plore',
            feature_forecast: 'р░зр░░ р░Ер░Вр░Ър░ир░╛',
            feature_forecast_desc: 'р░зр░░ р░Чр░гр░ир░▓р▒Нр░ир░┐ р░Ър▒Вр░бр░Вр░бр░┐, р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░Тр░░р░┐р░пр▒Жр░Вр░Яр▒Зр░╖р░ир▒НтАМр░▓р▒Б р░ор░░р░┐р░пр▒Б р░др░жр▒Бр░кр░░р░┐ 6 р░ир▒Жр░▓р░▓ р░Хр▒Лр░╕р░В р░▓р░╛р░нр░жр░╛р░пр░Х р░╕р░▓р░╣р░╛ р░кр▒Кр░Вр░жр░Вр░бр░┐.',
            btn_explore_forecast: 'р░лр▒Ар░Ър░░р▒Н р░Ер░ир▒Нр░╡р▒Зр░╖р░┐р░Вр░Ър░Вр░бр░┐'
        ,
            cost_of_cultivation: 'р░╡р░┐р░др░░р░г р░╡р▒Нр░пр░пр░В:',
            expected_yield: 'р░Ер░ир▒Бр░ор░╛р░ир░┐р░д р░жр░┐р░Чр▒Бр░мр░бр░┐:',
            estimated_profit: 'р░Ер░Вр░Ър░ир░╛ р░▓р░╛р░нр░В:',
            current_market_price: 'р░кр▒Нр░░р░╕р▒Нр░др▒Бр░д р░ор░╛р░░р▒Нр░Хр▒Жр░Яр▒Н р░зр░░:',
            government_msp: 'р░кр▒Нр░░р░нр▒Бр░др▒Нр░╡ MSP:',
            recommendation_note: 'р░Чр░ор░ир░┐р░Х: р░╕р░┐р░лр░╛р░░р▒Нр░╕р▒Б р░ор▒Лр░бр░▓р▒Н N, P, K р░ор░░р░┐р░пр▒Б pH р░кр▒И р░Яр▒Нр░░р▒Жр░пр░┐р░ир▒Н р░Ър▒Зр░пр░мр░бр░┐р░Вр░жр░┐. р░Зр░др░░ р░лр▒Ар░▓р▒Нр░бр▒Нр░╕р▒Нр▒Ир░╡р░▓р▒Нр░бр▒Н.'
        },
        kn: {
            tile_recommend: 'ЁЯТб р▓мр│Жр▓│р│Ж р▓╢р▓┐р▓лр▓╛р▓░р▓╕р│Б',
            tile_forecast: 'ЁЯУИ р▓мр│Жр▓▓р│Ж р▓нр▓╡р▓┐р▓╖р│Нр▓пр▓╡р▓╛р▓гр▓┐',
            tile_info: 'ЁЯМ╛ р▓мр│Жр▓│р│Ж р▓ор▓╛р▓╣р▓┐р▓др▓┐',
            tile_calendar: 'ЁЯУЕ р▓Хр│Нр▓пр▓╛р▓▓р│Жр▓Вр▓бр▓░р│Н',
            tile_profile: 'ЁЯСд р▓кр│Нр▓░р│Кр▓лр│Ир▓▓р│Н',
            page_title: 'ЁЯУК р▓мр│Жр▓│р│Ж р▓ор▓╛р▓╣р▓┐р▓др▓┐',
            select_crop: 'р▓мр│Жр▓▓р│Ж р▓╡р▓┐р▓╢р│Нр▓▓р│Зр▓╖р▓гр│Жр▓Чр│Ж р▓мр│Жр▓│р│Ж р▓Жр▓пр│Нр▓Хр│Жр▓ор▓╛р▓бр▓┐',
            loading: 'р▓мр│Жр▓│р│Ж р▓ор▓╛р▓╣р▓┐р▓др▓┐ р▓▓р│Лр▓бр│Н р▓Жр▓Чр│Бр▓др│Нр▓др▓┐р▓жр│Ж...',
            back_to_home: 'тЖР р▓╣р│Лр▓ор│НтАМр▓Чр│Ж р▓╣р▓┐р▓Вр▓жр▓┐р▓░р│Бр▓Чр▓┐'
        ,
            feature_info: 'р▓мр│Жр▓│р│Ж р▓ор▓╛р▓╣р▓┐р▓др▓┐',
            feature_info_desc: 'р▓мр│Жр▓│р│Ж-р▓╕р▓Вр▓мр▓Вр▓зр▓┐р▓д р▓╡р▓┐р▓╡р▓░р▓Чр▓│р│Б, р▓ор▓╛р▓░р│Бр▓Хр▓Яр│Нр▓Яр│Ж р▓мр│Жр▓▓р│Жр▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓╢р▓┐р▓лр▓╛р▓░р▓╕р│Бр▓Чр▓│р│Б р▓ор▓др│Нр▓др│Б р▓кр│Вр▓░р│Нр▓╡р▓╛р▓ир│Бр▓ор▓╛р▓ир▓Чр▓│р▓Вр▓др▓╣ р▓╡р│Зр▓жр▓┐р▓Хр│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓мр│Нр▓░р│Мр▓╕р│Н р▓ор▓╛р▓бр▓┐.',
            btn_view_info: 'р▓мр│Жр▓│р│Ж р▓ир│Лр▓бр▓┐',
            feature_recommend: 'р▓мр│Жр▓│р│Ж р▓╢р▓┐р▓лр▓╛р▓░р▓╕р│Б',
            feature_recommend_desc: 'р▓ир▓┐р▓ор│Нр▓о р▓ор▓гр│Нр▓гр▓┐р▓и р▓╡р▓┐р▓з, р▓╕р│Нр▓ер▓│ р▓ор▓др│Нр▓др│Б р▓Лр▓др│Бр▓мр▓Вр▓зр▓┐р▓д р▓кр▓░р▓┐р▓╕р│Нр▓ер▓┐р▓др│Жр▓Чр▓│ р▓Жр▓зр▓╛р▓░р▓ж р▓ор│Зр▓▓р│Ж р▓мр│Бр▓жр│Нр▓зр▓┐р▓╡р▓Вр▓др▓┐р▓Хр│Жр▓п р▓╢р▓┐р▓лр▓╛р▓░р▓╕р│Бр▓Чр▓│р▓ир│Нр▓ир│Б р▓кр▓бр│Жр▓пр▓┐р▓░р▓┐.',
            btn_explore_recommend: 'р▓лр│Ар▓Ър▓░р│Н р▓Ер▓ир│Нр▓╡р│Зр▓╖р▓┐р▓╕р▓┐',
            feature_forecast: 'р▓мр│Жр▓▓р│Ж р▓нр▓╡р▓┐р▓╖р│Нр▓пр▓╡р▓╛р▓гр▓┐',
            feature_forecast_desc: 'р▓мр│Жр▓▓р│Ж р▓Ер▓Вр▓жр▓╛р▓Ьр│Бр▓Чр▓│р▓ир│Нр▓ир│Б р▓ир│Лр▓бр▓┐, р▓ор▓╛р▓░р│Бр▓Хр▓Яр│Нр▓Яр│Ж р▓кр│Нр▓░р▓╡р▓гр▓др│Ж р▓ор▓др│Нр▓др│Б р▓ор│Бр▓Вр▓жр▓┐р▓и 6 р▓др▓┐р▓Вр▓Чр▓│р▓┐р▓Чр│В р▓▓р▓╛р▓нр▓жр▓╛р▓пр▓Х р▓╕р▓▓р▓╣р│Жр▓Чр▓│р▓ир│Нр▓ир│Б р▓кр▓бр│Жр▓пр▓┐р▓░р▓┐.',
            btn_explore_forecast: 'р▓лр│Ар▓Ър▓░р│Н р▓Ер▓ир│Нр▓╡р│Зр▓╖р▓┐р▓╕р▓┐'
        ,
            cost_of_cultivation: 'р▓Ер▓Чр│Жр▓пр│Бр▓╡ р▓╡р│Жр▓Ър│Нр▓Ъ:',
            expected_yield: 'р▓Ер▓ир▓╛р▓╡р▓╢р│Нр▓пр▓Х р▓лр▓▓',
            estimated_profit: 'р▓Ер▓Вр▓жр▓╛р▓Ьр│Б р▓▓р▓╛р▓н:',
            current_market_price: 'р▓кр│Нр▓░р▓╕р│Нр▓др│Бр▓д р▓ор▓╛р▓░р│Бр▓Хр▓Яр│Нр▓Яр│Ж р▓мр│Жр▓▓р│Ж:',
            government_msp: 'р▓╕р▓░р│Нр▓Хр▓╛р▓░р▓┐ MSP:',
            recommendation_note: 'р▓Чр▓ор▓ир▓┐р▓╕р▓┐: р▓╢р▓┐р▓лр▓╛р▓░р▓╕р│Б р▓ор▓╛р▓жр▓░р▓┐ N, P, K р▓ор▓др│Нр▓др│Б pH р▓ор│Зр▓▓р│Ж р▓др▓░р▓мр│Зр▓др▓┐ р▓кр▓бр│Жр▓жр▓┐р▓жр│Ж. р▓Зр▓др▓░р│Ж р▓Хр│Нр▓╖р│Зр▓др│Нр▓░р▓Чр▓│р│Б р▓Рр▓Ър│Нр▓Ыр▓┐р▓Хр▓╡р▓╛р▓Чр▓┐р▓╡р│Ж.'
        },
        ta: {
            tile_recommend: 'ЁЯТб рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИ',
            tile_forecast: 'ЁЯУИ ро╡ро┐ро▓рпИ роХрогро┐рокрпНрокрпБ',
            tile_info: 'ЁЯМ╛ рокропро┐ро░рпН родроХро╡ро▓рпН',
            tile_calendar: 'ЁЯУЕ роХро╛ро▓рогрпНроЯро░рпН',
            tile_profile: 'ЁЯСд роЪрпБропро╡ро┐ро╡ро░роорпН',
            page_title: 'ЁЯУК рокропро┐ро░рпН родроХро╡ро▓рпН',
            select_crop: 'ро╡ро┐ро▓рпИ рокроХрпБрокрпНрокро╛ропрпНро╡ро┐ро▒рпНроХро╛роХ роТро░рпБ рокропро┐ро░рпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ',
            loading: 'рокропро┐ро░рпН родроХро╡ро▓рпН роПро▒рпНро▒рокрпНрокроЯрпБроХро┐ро▒родрпБ...',
            back_to_home: 'тЖР роорпБроХрокрпНрокро┐ро▒рпНроХрпБ родро┐ро░рпБроорпНрокрпБ'
        ,
            feature_info: 'рокропро┐ро░рпН родроХро╡ро▓рпН',
            feature_info_desc: 'рокропро┐ро░рпН-роХрпБро▒ро┐родрпНрод ро╡ро┐ро╡ро░роЩрпНроХро│рпН, роЪроирпНродрпИ ро╡ро┐ро▓рпИроХро│рпН рооро▒рпНро▒рпБроорпН рокро░ро┐роирпНродрпБро░рпИроХро│рпН рооро▒рпНро▒рпБроорпН роХрогро┐рокрпНрокрпБроХро│рпН рокрпЛройрпНро▒ роХро░рпБро╡ро┐роХро│рпИ роЙро▓ро╛ро╡рпБроХ.',
            btn_view_info: 'рокропро┐ро░рпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН',
            feature_recommend: 'рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИ',
            feature_recommend_desc: 'роЙроЩрпНроХро│рпН роорогрпН ро╡роХрпИ, роЗроЯроорпН рооро▒рпНро▒рпБроорпН рокро░рпБро╡родрпНродрпИроХрпН роХро░рпБродрпНродро┐ро▓рпН роХрпКрогрпНроЯрпБ роЕро▒ро┐ро╡ро╛ро░рпНроирпНрод рокро░ро┐роирпНродрпБро░рпИроХро│рпИрокрпН рокрпЖро▒рпБроЩрпНроХро│рпН.',
            btn_explore_recommend: 'рокропройрпНрокро╛роЯрпНроЯрпИ роЖро░ро╛ропрпНроХ',
            feature_forecast: 'ро╡ро┐ро▓рпИ роХрогро┐рокрпНрокрпБ',
            feature_forecast_desc: 'ро╡ро┐ро▓рпИ роХрогро┐рокрпНрокрпБроХро│рпИрокрпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН, роЪроирпНродрпИ рокрпЛроХрпНроХрпБроХро│рпИрокрпН рокро╛ро░рпНроХрпНроХро╡рпБроорпН рооро▒рпНро▒рпБроорпН роЕроЯрпБродрпНрод 6 рооро╛родроЩрпНроХро│рпБроХрпНроХрпБ ро▓ро╛рокроХро░рооро╛рой роЖро▓рпЛроЪройрпИропрпИрокрпН рокрпЖро▒ро╡рпБроорпН.',
            btn_explore_forecast: 'рокропройрпНрокро╛роЯрпНроЯрпИ роЖро░ро╛ропрпНроХ'
        ,
            cost_of_cultivation: 'роХ╪з╪┤╪крпБроХрпНроХро╛рой роЪрпЖро▓ро╡рпБ:',
            expected_yield: 'роОродро┐ро░рпНрокро╛ро░рпНроХрпНроХрокрпНрокроЯрпБроорпН ро╡ро┐ро│рпИро╡рпБ:',
            estimated_profit: 'роХрогро┐роХрпНроХрокрпНрокроЯрпНроЯ ро▓ро╛рокроорпН:',
            current_market_price: 'родро▒рпНрокрпЛродрпИроп роЪроирпНродрпИ ро╡ро┐ро▓рпИ:',
            government_msp: 'роЕро░роЪрпБ MSP:',
            recommendation_note: 'роХрпБро▒ро┐рокрпНрокрпБ: рокро░ро┐роирпНродрпБро░рпИ рооро╛роЯро▓рпН N, P, K рооро▒рпНро▒рпБроорпН pH роЗро▓рпН рокропро┐ро▒рпНроЪро┐ рокрпЖро▒рпНро▒родрпБ. рооро▒рпНро▒ рокрпБро▓роЩрпНроХро│рпН ро╡ро┐ро░рпБрокрпНрокрооро╛ройро╡рпИ.'
        }
    };

    function getStored() {
        try { return localStorage.getItem(STORAGE_KEY) || DEFAULT; } catch(e){ return DEFAULT; }
    }

    function setStored(lang) {
        try { localStorage.setItem(STORAGE_KEY, lang); } catch(e){}
    }

    function translateDocument(lang) {
        const map = TRANSLATIONS[lang] || TRANSLATIONS[DEFAULT];
        // data-i18n -> textContent
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (map[key]) el.textContent = map[key];
        });
        // data-i18n-placeholder -> placeholder
        document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
            const key = el.getAttribute('data-i18n-placeholder');
            if (map[key]) el.setAttribute('placeholder', map[key]);
        });
        // data-i18n-value -> value
        document.querySelectorAll('[data-i18n-value]').forEach(el => {
            const key = el.getAttribute('data-i18n-value');
            if (map[key]) el.value = map[key];
        });
        // update language button text
        const btn = document.getElementById('language-btn') || document.querySelector('.language-selector');
        if (btn) {
            const names = { en: 'English', hi: 'рд╣рд┐рдиреНрджреА', te: 'р░др▒Жр░▓р▒Бр░Чр▒Б', kn: 'р▓Хр▓ир│Нр▓ир▓б', ta: 'родрооро┐ро┤рпН' };
            btn.textContent = `ЁЯМР ${names[lang] || names.en} тЦ╝`;
        }
    }

    function setLanguage(lang) {
        if (!TRANSLATIONS[lang]) lang = DEFAULT;
        setStored(lang);
        translateDocument(lang);
    }

    function initI18n() {
        const lang = getStored();
        // translate on DOMContentLoaded as well
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => translateDocument(lang));
        } else {
            translateDocument(lang);
        }
        attachChooser();
    }

    function attachChooser() {
        const btn = document.getElementById('language-btn') || document.querySelector('.language-selector');
        if (!btn) return;
        // avoid duplicating chooser
        if (btn.__i18n_attached) return;
        btn.__i18n_attached = true;

        const langs = Object.keys(TRANSLATIONS);
        const list = document.createElement('div');
        list.style.position = 'absolute';
        list.style.background = '#fff';
        list.style.border = '1px solid #ddd';
        list.style.boxShadow = '0 4px 12px rgba(0,0,0,0.08)';
        list.style.padding = '6px';
        list.style.borderRadius = '6px';
        list.style.zIndex = 2000;
        list.style.display = 'none';

        langs.forEach(l => {
            const item = document.createElement('div');
            item.textContent = l + ' тАФ ' + ( {en:'English',hi:'рд╣рд┐рдиреНрджреА',te:'р░др▒Жр░▓р▒Бр░Чр▒Б',kn:'р▓Хр▓ир│Нр▓ир▓б',ta:'родрооро┐ро┤рпН'}[l] || l );
            item.style.padding = '6px 10px';
            item.style.cursor = 'pointer';
            item.addEventListener('mouseenter', ()=> item.style.background='#f5f5f5');
            item.addEventListener('mouseleave', ()=> item.style.background='transparent');
            item.addEventListener('click', (e) => {
                setLanguage(l);
                list.style.display = 'none';
            });
            list.appendChild(item);
        });

        document.body.appendChild(list);

        btn.addEventListener('click', (ev) => {
            const rect = btn.getBoundingClientRect();
            list.style.left = rect.left + 'px';
            list.style.top = (rect.bottom + 6) + 'px';
            list.style.display = list.style.display === 'none' ? 'block' : 'none';
        });

        // hide on outside click
        document.addEventListener('click', (e)=>{
            if (!btn.contains(e.target) && !list.contains(e.target)) list.style.display = 'none';
        });
    }

    // expose API
    window.__i18n = { initI18n, setLanguage, getLanguage: getStored };
    // auto-init
    try { initI18n(); } catch(e) { /* fail silently */ }

})(window);
